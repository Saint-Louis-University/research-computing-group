<!DOCTYPE html>
<html  lang="en-US">

<head>
  <meta charset="utf-8">
  <title>APEX</title>

  <meta name="generator" content="Hugo 0.53" />

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <!-- ** Plugins Needed for the Project ** -->
  <!-- Bootstrap -->
  <link rel="stylesheet" href="/research-computing-group/plugins/bootstrap/bootstrap.min.css">
  <!-- themefy-icon -->
  <link rel="stylesheet" href="/research-computing-group/plugins/themify-icons/themify-icons.css">
  <!-- highlight -->
  <link rel="stylesheet" href="/research-computing-group/plugins/highlight/hybrid.css">
  <!-- fonts -->
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet">


  <style>
  :root{
    --primary-color:#003da5;
    --secondary-color:#f9f9f9;
    --text-color:#636363;
    --text-color-dark:#242738;
    --white-color:#ffffff;
  }  
  </style>


  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="/research-computing-group/css/style.min.css" integrity="" media="screen">

  <!-- jquiry -->
  <script src="/research-computing-group/plugins/jquery/jquery-1.12.4.js"></script>

  <!-- jquary ui -->
  <script src="/research-computing-group/plugins/jquery/jquery-ui.js"></script>

  <!--Favicon-->
  <link rel="icon" href="/research-computing-group/images/favicon.png" type="image/x-icon">

</head>

<body>

<!-- navigation -->
<header class="shadow-bottom position-relative">
  <div class="container">
    <nav class="navbar navbar-expand-lg navbar-light">
    <a class="navbar-brand" href="/research-computing-group/">SLU</a>
    <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navigation"
      aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse text-center" id="navigation">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link text-dark" href="/research-computing-group/">Home</a>
        </li>
        
        
        <li class="nav-item">
            <a class="nav-link text-dark" href="/research-computing-group/about">About</a>
        </li>
        
        
        
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle text-dark" href="#" role="button" data-toggle="dropdown" aria-haspopup="true"
            aria-expanded="false">
            getting-started
          </a>
          <div class="dropdown-menu" >
            
            <a class="dropdown-item" href="/research-computing-group/gettingstarted">Getting Started</a>
            
            <a class="dropdown-item" href="/research-computing-group/getting-started/ftp/">FTP</a>
            
            <a class="dropdown-item" href="/research-computing-group/getting-started/ssh/">SSH</a>
            
            <a class="dropdown-item" href="/research-computing-group/getting-started/vpn/">VPN</a>
            
            <a class="dropdown-item" href="/research-computing-group/getting-started/vnc/">VNC</a>
            
          </div>
        </li>
        
        
        
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle text-dark" href="#" role="button" data-toggle="dropdown" aria-haspopup="true"
            aria-expanded="false">
            support
          </a>
          <div class="dropdown-menu" >
            
            <a class="dropdown-item" href="/research-computing-group/a-support">Support</a>
            
            <a class="dropdown-item" href="/research-computing-group/support/application-installation/">Application Installation</a>
            
            <a class="dropdown-item" href="/research-computing-group/support/compilers/">Compilers</a>
            
            <a class="dropdown-item" href="/research-computing-group/support/infiniband/">Infiniband</a>
            
            <a class="dropdown-item" href="/research-computing-group/support/r-language/">R Language</a>
            
            <a class="dropdown-item" href="/research-computing-group/support/running-cluster/">Running Jobs on the Cluster</a>
            
            <a class="dropdown-item" href="/research-computing-group/support/sas-spss-atlas/">SAS, SPSS, and ATLAS.ti</a>
            
            <a class="dropdown-item" href="/research-computing-group/support/storage/">Storage</a>
            
            <a class="dropdown-item" href="/research-computing-group/support/python-versions/">Multiple Versions of Python</a>
            
          </div>
        </li>
        
        
        
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle text-dark" href="#" role="button" data-toggle="dropdown" aria-haspopup="true"
            aria-expanded="false">
            slurm
          </a>
          <div class="dropdown-menu" >
            
            <a class="dropdown-item" href="/research-computing-group/slurm/slurm-commands/">SLURM Commands</a>
            
            <a class="dropdown-item" href="/research-computing-group/slurm/slurm-examples/">SLURM Examples</a>
            
          </div>
        </li>
        
        
        
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle text-dark" href="#" role="button" data-toggle="dropdown" aria-haspopup="true"
            aria-expanded="false">
            apex
          </a>
          <div class="dropdown-menu" >
            
            <a class="dropdown-item" href="/research-computing-group/apex/apex/">APEX</a>
            
            <a class="dropdown-item" href="/research-computing-group/apex/hardware/">Hardware</a>
            
          </div>
        </li>
        
        
        
        <li class="nav-item">
            <a class="nav-link text-dark" href="/research-computing-group/faq">FAQ</a>
        </li>
        
        
        
        <li class="nav-item">
            <a class="nav-link text-dark" href="/research-computing-group/contact">Contact</a>
        </li>
        
        
      </ul>
      
      <ul class="list-inline text-center mb-0">
        
        <li class="list-inline-item"><a class="text-dark" href="/research-computing-group/"></a></li>
        
      </ul>
    </div>
  </nav>
  </div>
</header>
<!-- /navigation -->



<section class="single pt-5 bg-gray">
  <div class="container">
    <div class="row">
      <div class="col-lg-3">
        <div class="p-4 bg-white sticky-top">
            
            <nav class="sidebar-menu">
              <ul class="list-styled">
            <li class=""><a href="/research-computing-group/gettingstarted/">Getting Started</a>
            </li>
            <li class=""><a href="/research-computing-group/slurm/">Slurms</a>
              <ul class="">
            <li class=""><a href="/research-computing-group/slurm/slurm-examples/">SLURM Examples</a>
            </li>
            <li class=""><a href="/research-computing-group/slurm/slurm-commands/">SLURM Commands</a>
            </li></ul>
              
            </li>
            <li class="parent d-block "><a href="/research-computing-group/apex/">Apexes</a>
              <ul class="sub-menu">
            <li class=" active "><a href="/research-computing-group/apex/apex/">APEX</a>
            </li>
            <li class=""><a href="/research-computing-group/apex/hardware/">Hardware</a>
            </li></ul>
              
            </li>
            <li class=""><a href="/research-computing-group/getting-started/">Getting-starteds</a>
              <ul class="">
            <li class=""><a href="/research-computing-group/getting-started/ftp/">FTP</a>
            </li>
            <li class=""><a href="/research-computing-group/getting-started/ssh/">SSH</a>
            </li>
            <li class=""><a href="/research-computing-group/getting-started/vpn/">VPN</a>
            </li>
            <li class=""><a href="/research-computing-group/getting-started/vnc/">VNC</a>
            </li>
            <li class=""><a href="/research-computing-group/getting-started/vnc_subpage/">VNC Subpage</a>
            </li></ul>
              
            </li>
            <li class=""><a href="/research-computing-group/support/">Supports</a>
              <ul class="">
            <li class=""><a href="/research-computing-group/support/application-installation/">Application Installation</a>
            </li>
            <li class=""><a href="/research-computing-group/support/compilers/">Compilers</a>
            </li>
            <li class=""><a href="/research-computing-group/support/infiniband/">Infiniband</a>
            </li>
            <li class=""><a href="/research-computing-group/support/python-versions/">Multiple Versions of Python</a>
            </li>
            <li class=""><a href="/research-computing-group/support/r-language/">R Language</a>
            </li>
            <li class=""><a href="/research-computing-group/support/running-cluster/">Running Jobs on the Cluster</a>
            </li>
            <li class=""><a href="/research-computing-group/support/sas-spss-atlas/">SAS, SPSS, and ATLAS.ti</a>
            </li>
            <li class=""><a href="/research-computing-group/support/storage/">Storage</a>
            </li></ul>
              
            </li>
            <li class=""><a href="/research-computing-group/contact/">Contact</a>
            </li>
            <li class=""><a href="/research-computing-group/faq/">FAQ</a>
            </li>
            <li class=""><a href="/research-computing-group/qmon-tutorial/">Qmon Tutorial</a>
            </li>
            <li class=""><a href="/research-computing-group/a-support/">Support</a>
            </li>
            <li class=""><a href="/research-computing-group/about/">home</a>
            </li></ul>
            </nav>
    
            
        </div>
      </div>
      <div class="col-lg-9">
        <div class="p-5 bg-white">
            <h2>APEX</h2>
            <p>Please see the <u><a href="/gettingstarted/">Getting Started</a></u> page if you are new to the HPC. This will explain how to connect to the cluster and the applications needed for this.</p>

<p>Note: Please also see the <u><a href="http://support.brightcomputing.com/manuals/7.2/user-manual.pdf">Bright Cluster Manager 7.2 Manual</a></u> for detailed information on how to use Apex.</p>

<p>We are in the process of moving resources from Kepler to Apex. Updates on apex include:</p>

<p>&minus;  CentOS 7.2<br>
&minus;  Infiniband connectivity on every nodes.<br>
&minus; Central user portal that shows status of nodes and running jobs.<br>
&minus; Hadoop and other Big Data tools will be available.<br>
&minus; Slurm job scheduler.</p>

<p>After 8-30-16 most new accounts will be created on Apex.</p>

<p>apex.slu.edu</p>

<p>Most of the support documentation that was written for Kepler is applicable to Apex. The VPN process is different for Apex. If you need to use an application with a graphical user interface, you can do the following.</p>

<pre><code>ssh -Y username@apex.slu.edu
</code></pre>

<p><u><strong>Moving files from Kepler to Apex</strong></u></p>

<p>Both cluster are connected to the network attached storage volume xfs2. Files can be copied from Kepler to Apex on /xfs2. You will need to make sure file permissions are set correctly so you can access the file on Apex.</p>

<p><u><strong>Cluster Documentation</strong></u></p>

<p>Below is a link to the Bright Cluster Manager 7.2 user manual. Please review this document for complete information on how to use the cluster.</p>

<p><u><a href="http://support.brightcomputing.com/manuals/7.2/user-manual.pdf">Bright Cluster Manager 7.2 User Manual</a></u></p>

<p><br></p>

<p><u><strong>Storage</strong></u></p>

<p>When you log into Apex, you will be in your personal /home directory. Your /home directory is shared and is available on all Apex nodes. This directory is backed up on a nightly basis.</p>

<p>Apex has access to 2 large network attached storage arrays.</p>

<pre><code>/mnt/xfs has 73 TB of space
/xfs2 has 117 TB of space
</code></pre>

<p>Both of these volumes are available on all of the Apex nodes. The arrays can be used to store large data files that will be used for analysis or job scratch space. <u><strong>Files are not backed up on this space unless there is a need to do so. If you need files backed up on this space, please contact Eric Kaufmann at kaufmann@slu.edu.</strong></u></p>

<p><u><strong>Cluster Status</strong></u></p>

<p><strong>We are in the process of installing ganglia. This is installed on our older cluster <u><a href="http://kepler.slu.edu/">Kepler</a></u>.</strong></p>

<p><u><strong>Software on Apex</strong></u></p>

<p>As on Kepler, applications are installed as module files. Please see <u><a href="../../support/application-installation/">Application</a></u>  documentation. You can install applications in your own home directory. If others need access to the application, it will need to be installed in /cm/shares/apps. This is where most applications are installed on the cluster. Applications installed in this directory can be installed via module files.</p>

<p><u><strong>Apex VPN</strong></u></p>

<p>If you are need to connect to Apex off campus, you will need VPN access and the VPN cilent.</p>

<p><u><a href="../../getting-started/vpn/">VPN</a></u></p>

<p><u><strong>GUI without VNC</strong></u></p>

<p>If you need to use an application with graphical user interface without VNC, you can do the following.</p>

<pre><code>ssh -Y username@apex.slu.edu
</code></pre>

<p>When you open the application on the command line, the window will appear on your desktop.</p>

<p><u><strong>Apex VNC Process:</strong></u></p>

<p><strong>Note:</strong></p>

<p>We are currently looking at a java based VNC viewer. This allows you to complete the SSH tunnel and VNC login in one process. Please download <u><a href="https://www.tightvnc.com/download.php">TightVNC</a></u>. You will need the Java Viewer
  Version (2.8.3). You will still need to set up a vnc password if this is your first tine using VNC. The steps for this are listed below.</p>

<p>VNC allows you to use a graphical user interface on the cluster.</p>

<p>See the following <a href="../../getting-started/vnc/">VNC</a> documentation for basic setup. There are a few additional steps that will need to be completed to set up VNC.</p>

<p>If you want to use VNC, you will first need to do the following.</p>

<p>1.&nbsp;&nbsp;First, you will need to ssh to the server with a ssh client. See the <u><a href="../../getting-started/ssh/">ssh documentation</a></u> for more information.</p>

<p>2.&nbsp;&nbsp;At the command prompt type: vncpasswd
<li style="list-style-type:none;PADDING-LEFT:20px;font-size:15px">Note: This command will set the password you will login to for a VNC session. That password is separate form your user password.</li></p>

<p>3.&nbsp;&nbsp;After you set your password, type: vncserver. That command will set up the
    vnc session. You will see the following message:</p>

<pre><code>Starting applications specified in /home/kaufmann/.vnc/xstartu
Log file is /home/kaufmann/.vnc/kepler:6.log
</code></pre>

<p>The port the session was set up in the above example is 5906.</p>

<p>The basic command to set the VNC session up is as follows.</p>

<pre><code>ssh -L 5906:localhost:5906 username@apex.slu.edu
</code></pre>

<p>You will see the following message:</p>

<pre><code>Starting applications specified in /home/kaufmann/.vnc/xstartup
Log file is /home/kaufmann/.vnc/kepler:6.log
</code></pre>

<p>4.&nbsp;&nbsp;You will then need to change the syntax a bit in the VNC client you are using. The syntax is listed below.</p>

<p><strong>Note</strong>: You will need to use the specific port number that you were given when the session was set up. The port in the example aboveis 5906. You will only need to use the last number of the port. So, in this example we will use 6.</p>

<p>Instead of using: vncviewer kepler.slu.edu:6</p>

<p>You will use: vncviewer localhost:6</p>

<p>You can also use TightVNC Viewer which combines the 2 steps into one client. The SSH tunnel session and VNC sessions are launched from a single screen instead of having to use 2 different applications.</p>

<p>After you have the VNC session set up. You can simply use the tightVNC java client. You will need to download TightVNC Java Viewer(Verison 2.8.3) <u><a href="https://www.tightvnc.com/download.php">TightVNC Viewer download</a></u>.</p>

<p>Java many need to be upgraded on your machine. If you encounter problems, please contact us and we will be happy to help.</p>

<p>After you download and install the viewer you will see the following screen.</p>

<p><img src="../../../../images/apex.png" style ="height:265px;width:451px;"></p>

<p>This will handle bot the ssh tunnel and the VNC session login. When you hit connect, you will be prompted for your cluster account password. Then you will be prompted for the VNC password that you set up in step 3.</p>

<p><u><strong>Using Network Drives</strong></u></p>

<p>1.&nbsp;&nbsp;Windows</p>

<p>We are currently looking into accessing a network volume on the cluster from Windows.</p>

<p>2.&nbsp;&nbsp;&nbsp;&nbsp;Macintosh</p>

<p>To use a network drive from the cluster as a local volume on a Mac download the following.</p>

<p><a href="https://www.macissues.com/2014/10/13/how-to-mount-a-remote-system-as-a-drive-using-ssh-in-os-x/">https://www.macissues.com/2014/10/13/how-to-mount-a-remote-system-as-a-drive-using-ssh-in-os-x/</a></p>

<p>If you need to preserve group permissions, use the following syntax.</p>

<pre><code>sshfs username@apex.slu.edu:/xfs2/waring_lab /mount -ovolname=Mount -o defer_permissions
</code></pre>

<p><u><strong>Python</strong></u></p>

<p>There is currently a module for Python 3.6.1. Packages can be installed in your /home directory with the following syntax. Note: this has been tested with the Python 3.6.1 module file.</p>

<pre><code>python -m pip install --user scipy
</code></pre>

<p>This would would install scipy in your home directory.</p>

<p><u><strong>How to use the job scheduler</strong></u></p>

<p>Please see our <u><a href="../../slurm/slurm-commands/">SLURM</a></u> page for complete documentation.</p>

<p><br>
There are 4 queues currently set up on the cluster. The queues are as follows.</p>

<p>defq - This is the default queue which most jobs will be run it.<br>
hi-men - This is the queue that contains the nodes with the highest memory in the cluster.<br>
med_mem - This is the queue the contains the nodes that have less memory than the high memory nodes,<br>
matlab - This queue contains the nodes that have Matlab installed.<br></p>

<p>Please read the Bright Cluster manager User manual Chapter 5 for more detailed SLUM information.</p>

<p><u><a href="http://support.brightcomputing.com/manuals/7.2/user-manual.pdf">Bright 7.2 User Manual</a></u></p>

<p>Useful SLURM commands:</p>

<p>squeue – lets you see whats in the SLURM queue<br>
squeue -u <username> – as above but for a specific user<br>
scancel <jobid> – cancels a certain job id<br>
scancel -u <username> – cancels all jobs for a certain user<br></p>

<p>Here is an example to submit a simple job to the SLURM job scheduler. This specific is a simple batch job.</p>

<p>If you go to /cm/shared/scripts there is a folder called SLURM.</p>

<p>1.&nbsp;&nbsp;Copy slurm-job.sh to your home directory.</p>

<p>Here is a listing of the script contents:</p>

<pre><code>#!/usr/bin/env bash
#SBATCH -o slurm.sh.out 
#SBATCH -p defq

echo &quot;In the directory: `pwd`&quot; 
echo &quot;As the user: `whoami`&quot; 
echo “write this is a file&quot; &gt; analysis.output 
sleep 60
</code></pre>

<p>2.&nbsp;&nbsp;Make sure you have the SLURM module loaded by typing module list. You should see the module listed. If not you will have to add it.</p>

<p>3.&nbsp;&nbsp;Go to your /home folder and type the following.</p>

<pre><code>sbatch slurm-job.sh 
</code></pre>

<p>&minus; This command will submit the job script to to the scheduler. You will see the following message.</p>

<pre><code>Submitted batch job 84 
</code></pre>

<p>&minus;The submitted job number is 84.</p>

<p>4.&nbsp;&nbsp;To check the status of the job you can use the squeue command.</p>

<p>5.&nbsp;&nbsp;To get the job details type the following.</p>

<pre><code>scontrol show job 84 - The output of this is listed below. 
JobId=84 JobName=slurm-job.sh 
UserId=kaufmann(1003) GroupId=kaufmann(1003)
Priority=4294901739 Nice=0 Account=(null) QOS=normal 
JobState=FAILED Reason=NonZeroExitCode Dependency=(null) 
Requeue=1 Restarts=0 BatchFlag=1 Reboot=0 ExitCode=2:0 
RunTime=00:00:01 TimeLimit=UNLIMITED TimeMin=N/A 
SubmitTime=2016-11-21T11:11:32 EligibleTime=2016-11-21T11:11:32 
StartTime=2016-11-21T11:11:33 EndTime=2016-11-21T11:11:34 
PreemptTime=None SuspendTime=None SecsPreSuspend=0 
Partition=defq AllocNode:Sid=apex:23995 
ReqNodeList=(null) ExcNodeList=(null) 
NodeList=compute-026 
BatchHost=compute-026 
NumNodes=1 NumCPUs=24 CPUs/Task=1 ReqB:S:C:T=0:0:*:* 
TRES=cpu=24,node=1 
Socks/Node=* NtasksPerN:B:S:C=0:0:*:* CoreSpec=* 
MinCPUsNode=1 MinMemoryNode=0 MinTmpDiskNode=0 
Features=(null) Gres=(null) Reservation=(null) 
Shared=0 Contiguous=0 Licenses=(null) Network=(null)
Command=/home/kaufmann/slurm_test/slurm-job.sh 
WorkDir=/home/kaufmann/slurm_test 
StdErr=/home/kaufmann/slurm_test/slurm.sh.out 
StdIn=/dev/null 
StdOut=/home/kaufmann/slurm_test/slurm.sh.out 
Power= SICP=0
</code></pre>

            <p class="post-meta border-bottom pb-3 mb-0">Updated on 25 Jan 2019</p><nav class="pagination mt-3"><a class="nav nav-prev" href="/research-computing-group/apex/" title="Apexes"><i class="ti-arrow-left mr-2"></i>Apexes</a>
            <a class="nav nav-next" href="/research-computing-group/apex/hardware/" title="Hardware">Hardware<i class="ti-arrow-right ml-2"></i></a>
            </nav></div>
      </div>
    </div>
  </div>
</section>


<!-- footer -->
<footer class="section bg-gray pb-0">
  <div class="container">
    <div class="row">
      <div class="col-md-8 text-md-left text-center">
       
      </div>
      <div class="col-md-4 text-md-right text-center">
        <ul class="list-inline mb-3">
          
        </ul>
      </div>
    </div>
  </div>
</footer>
<!-- /footer -->

<!-- Bootstrap JS -->
<script src="/research-computing-group/plugins/bootstrap/bootstrap.min.js"></script>
<!-- highlight -->
<script src="/research-computing-group/plugins/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<!-- Main Script -->

<script src="/research-computing-group/js/script.min.js"></script>


</body>

</html>